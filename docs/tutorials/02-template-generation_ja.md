# Step 2: OneEnvã«ã‚ˆã‚‹è‡ªå‹•ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆç”Ÿæˆ

**æ‰€è¦æ™‚é–“:** 5-10åˆ†  
**é›£æ˜“åº¦:** åˆç´š

## å­¦ç¿’ç›®æ¨™

- OneEnvã®è‡ªå‹•ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆç”Ÿæˆæ©Ÿèƒ½ã‚’ç†è§£ã™ã‚‹
- ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‹ã‚‰ã®ç’°å¢ƒå¤‰æ•°ç™ºè¦‹æ©Ÿèƒ½ã‚’ä½“é¨“ã™ã‚‹
- ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã®è¨­å®šæ–¹æ³•ã‚’å­¦ã¶
- ãƒ‡ãƒãƒƒã‚°ãƒ¢ãƒ¼ãƒ‰ã§ãƒ—ãƒ­ã‚»ã‚¹ã‚’ç¢ºèªã™ã‚‹

## å¾“æ¥ã®å•é¡Œç‚¹

### æ‰‹å‹•ã§ã®ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆä½œæˆ
```bash
# å¾“æ¥ã®æ–¹æ³•: æ‰‹å‹•ã§ .env.example ã‚’ä½œæˆ
echo "DATABASE_URL=postgresql://localhost:5432/mydb" > .env.example
echo "SECRET_KEY=your-secret-key" >> .env.example
echo "REDIS_URL=redis://localhost:6379" >> .env.example
# ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã”ã¨ã«å¿…è¦ãªå¤‰æ•°ã‚’èª¿æŸ»ã—ã¦æ‰‹å‹•è¿½åŠ ...
```

## OneEnvã«ã‚ˆã‚‹è‡ªå‹•ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆç”Ÿæˆ

### ã‚¹ãƒ†ãƒƒãƒ—1: åŸºæœ¬çš„ãªãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆç”Ÿæˆ

```bash
# ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã§å®Ÿè¡Œ
oneenv template
```

### ã‚¹ãƒ†ãƒƒãƒ—2: ãƒ‡ãƒãƒƒã‚°ãƒ¢ãƒ¼ãƒ‰ã§è©³ç´°ç¢ºèª

```bash
# ç™ºè¦‹ãƒ—ãƒ­ã‚»ã‚¹ã‚’è©³ç´°è¡¨ç¤º
oneenv template -d
```

**å‡ºåŠ›ä¾‹:**
```
=== OneEnv Template Generation (Debug Mode) ===
ğŸ” Discovering plugins via entry-points...
ğŸ“¦ Found plugin: myproject.config -> my_template
ğŸ“¦ Found plugin: database-lib -> db_template

ğŸ” Scanning legacy @oneenv decorators...
ğŸ“ Found decorator: custom_app_config

ğŸ”„ Processing templates...
âš ï¸  Duplicate variable detected: DATABASE_URL
    - Defined in: myproject.config, database-lib
    - Using configuration from: myproject.config

âœ… Generated template with 8 variables across 3 groups
```

### ã‚¹ãƒ†ãƒƒãƒ—3: ã‚«ã‚¹ã‚¿ãƒ å‡ºåŠ›ãƒ•ã‚¡ã‚¤ãƒ«

```bash
# ç•°ãªã‚‹ãƒ•ã‚¡ã‚¤ãƒ«åã§å‡ºåŠ›
oneenv template -o custom.env.example
```

## å®Ÿè·µæ¼”ç¿’

### æ¼”ç¿’1: ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã®ä½œæˆ

1. ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’ä½œæˆï¼š
```bash
mkdir template-tutorial
cd template-tutorial
```

2. ã‚«ã‚¹ã‚¿ãƒ ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚’ä½œæˆï¼ˆ`project_config.py`ï¼‰ï¼š
```python
from oneenv import oneenv

@oneenv
def app_template():
    return {
        "groups": {
            "Application": {
                "APP_NAME": {
                    "description": "ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å",
                    "default": "Tutorial App",
                    "required": True,
                    "importance": "critical"
                },
                "APP_VERSION": {
                    "description": "ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãƒãƒ¼ã‚¸ãƒ§ãƒ³",
                    "default": "1.0.0",
                    "importance": "important"
                }
            },
            "Database": {
                "DATABASE_URL": {
                    "description": "ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ¥ç¶šURL",
                    "default": "sqlite:///app.db",
                    "required": True,
                    "importance": "critical"
                }
            },
            "Settings": {
                "DEBUG": {
                    "description": "ãƒ‡ãƒãƒƒã‚°ãƒ¢ãƒ¼ãƒ‰",
                    "default": "False",
                    "choices": ["True", "False"],
                    "importance": "optional"
                }
            }
        }
    }
```

3. ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚’å®Ÿè¡Œï¼š
```python
# ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆç™»éŒ²ã®ãŸã‚ã«ã‚¤ãƒ³ãƒãƒ¼ãƒˆ
import project_config
```

4. ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆç”Ÿæˆï¼š
```bash
python -c "import project_config" && oneenv template
```

### æ¼”ç¿’2: å¾“æ¥å½¢å¼ã¨ã®æ··åœ¨

å¾“æ¥å½¢å¼ã®ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚‚è©¦ã—ã¦ã¿ã¾ã—ã‚‡ã†ï¼š

```python
# legacy_config.py
from oneenv import oneenv

@oneenv
def legacy_template():
    return {
        "LOG_LEVEL": {
            "description": "ãƒ­ã‚°ãƒ¬ãƒ™ãƒ«è¨­å®š",
            "default": "INFO",
            "choices": ["DEBUG", "INFO", "WARNING", "ERROR"],
            "group": "Logging",
            "importance": "optional"
        },
        "MAX_WORKERS": {
            "description": "ãƒ¯ãƒ¼ã‚«ãƒ¼æ•°",
            "default": "4",
            "group": "Performance",
            "importance": "important"
        }
    }
```

## ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹

### åŸºæœ¬ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ï¼ˆå¿…é ˆï¼‰
- **`description`**: å¤‰æ•°ã®èª¬æ˜ï¼ˆå¿…é ˆï¼‰

### ã‚ªãƒ—ã‚·ãƒ§ãƒ³ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰
- **`default`**: ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤
- **`required`**: å¿…é ˆã‹ã©ã†ã‹ï¼ˆtrue/falseï¼‰
- **`choices`**: æœ‰åŠ¹ãªé¸æŠè‚¢ã®ãƒªã‚¹ãƒˆ
- **`group`**: ã‚°ãƒ«ãƒ¼ãƒ—åï¼ˆå¾“æ¥å½¢å¼ç”¨ï¼‰
- **`importance`**: é‡è¦åº¦ãƒ¬ãƒ™ãƒ«

### é‡è¦åº¦ãƒ¬ãƒ™ãƒ«
- **`critical`**: ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å‹•ä½œã«å¿…é ˆ
- **`important`**: æœ¬ç•ªç’°å¢ƒã§è¨­å®šã™ã¹ãé …ç›®
- **`optional`**: ç´°ã‹ã„èª¿æ•´è¨­å®šï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ååˆ†ï¼‰

### Groupså½¢å¼ï¼ˆv0.3.1+ï¼‰
```python
{
    "groups": {
        "ã‚°ãƒ«ãƒ¼ãƒ—å": {
            "VARIABLE_NAME": {
                "description": "èª¬æ˜",
                "default": "å€¤",
                "importance": "critical"
            }
        }
    }
}
```

## ç”Ÿæˆã•ã‚Œã‚‹ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã®æ§‹é€ 

```bash
# Auto-generated by OneEnv

# ========== CRITICAL: å¿…é ˆè¨­å®šé …ç›® ==========

# ----- Application -----

# ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å
# Required
APP_NAME=Tutorial App

# ----- Database -----

# ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ¥ç¶šURL
# Required
DATABASE_URL=sqlite:///app.db

# ========== IMPORTANT: é‡è¦è¨­å®šé …ç›® ==========

# ----- Performance -----

# ãƒ¯ãƒ¼ã‚«ãƒ¼æ•°
MAX_WORKERS=4

# ========== OPTIONAL: ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ååˆ† ==========

# ----- Settings -----

# ãƒ‡ãƒãƒƒã‚°ãƒ¢ãƒ¼ãƒ‰
# Choices: True, False
DEBUG=False
```

## ã‚¹ãƒãƒ¼ãƒˆé‡è¤‡å‡¦ç†

è¤‡æ•°ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãŒåŒã˜å¤‰æ•°ã‚’å®šç¾©ã—ã¦ã„ã‚‹å ´åˆï¼š

```bash
# (Defined in: myproject.config, database-lib)
# myproject.config: ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ç”¨ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹URL
# database-lib: ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒ©ã‚¤ãƒ–ãƒ©ãƒªæ¥ç¶šè¨­å®š
# Required
DATABASE_URL=sqlite:///app.db
```

**å‡¦ç†æ–¹æ³•:**
- âœ… **å˜ä¸€ã‚¨ãƒ³ãƒˆãƒª**: å„å¤‰æ•°ã¯1å›ã®ã¿è¡¨ç¤º
- ğŸ“ **èª¬æ˜çµ±åˆ**: å…¨ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®èª¬æ˜ã‚’çµ±åˆ
- âš™ï¸ **æœ€åˆãŒå„ªå…ˆ**: è¨­å®šå€¤ã¯æœ€åˆã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ä½¿ç”¨
- ğŸ“‹ **ã‚½ãƒ¼ã‚¹è¡¨ç¤º**: ã©ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãŒå®šç¾©ã—ã¦ã„ã‚‹ã‹ã‚’è¡¨ç¤º

## CLIã‚ªãƒ—ã‚·ãƒ§ãƒ³è©³ç´°

### `-d, --debug`
ç™ºè¦‹ãƒ—ãƒ­ã‚»ã‚¹ã¨ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆç”Ÿæˆã®è©³ç´°ã‚’è¡¨ç¤º

### `-o, --output`
å‡ºåŠ›ãƒ•ã‚¡ã‚¤ãƒ«åã‚’æŒ‡å®šï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: `.env.example`ï¼‰

```bash
# ä½¿ç”¨ä¾‹
oneenv template -d -o my-template.env
```

## æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—

è‡ªå‹•ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆç”Ÿæˆã‚’å­¦ã³ã¾ã—ãŸã€‚æ¬¡ã¯ã€OneEnvã®å¼·åŠ›ãªåå‰ç©ºé–“ç®¡ç†æ©Ÿèƒ½ã‚’å­¦ã³ã¾ã—ã‚‡ã†ã€‚

**â†’ [Step 3: åå‰ä»˜ãç’°å¢ƒã®åŸºæœ¬](03-named-environments.md)**

## ã‚ˆãã‚ã‚‹è³ªå•

### Q: ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆãŒç”Ÿæˆã•ã‚Œãªã„å ´åˆã¯ï¼Ÿ
A: `oneenv template -d` ã§ãƒ‡ãƒãƒƒã‚°ãƒ¢ãƒ¼ãƒ‰ã‚’ä½¿ç”¨ã—ã€ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ãŒç™ºè¦‹ã•ã‚Œã¦ã„ã‚‹ã‹ç¢ºèªã—ã¦ãã ã•ã„ã€‚

### Q: é‡è¤‡å¤‰æ•°ã®å„ªå…ˆé †ä½ã‚’å¤‰æ›´ã—ãŸã„å ´åˆã¯ï¼Ÿ
A: ç¾åœ¨ã¯æœ€åˆã«ç™ºè¦‹ã•ã‚ŒãŸãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãŒå„ªå…ˆã•ã‚Œã¾ã™ã€‚pyproject.tomlã®entry-pointsé †åºã§èª¿æ•´å¯èƒ½ã§ã™ã€‚

### Q: ã‚«ã‚¹ã‚¿ãƒ ã‚°ãƒ«ãƒ¼ãƒ—åã‚’ä½¿ã„ãŸã„å ´åˆã¯ï¼Ÿ
A: groupså½¢å¼ã‚’ä½¿ç”¨ã—ã¦ä»»æ„ã®ã‚°ãƒ«ãƒ¼ãƒ—åã‚’è¨­å®šã§ãã¾ã™ã€‚